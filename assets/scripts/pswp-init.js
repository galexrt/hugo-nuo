$(document).ready(function() { var t = []; $("figure").each(function() { if ("pswp-ignore" == $(this).attr("class")) return !0; var e = $(this), a = e.find("a"), i = a.attr("href"), r = e.find("figcaption").html(), n = e.find("img").attr("src"); if (a.data("size")) var l = a.data("size").split("x"), s = { src: i, w: l[0], h: l[1], title: r, msrc: n }; else { s = { src: i, w: 800, h: 600, title: r, msrc: n }; var o = new Image; o.src = i; var c = setInterval(function() { var t = o.naturalWidth, e = o.naturalHeight; t && e && (clearInterval(c), s.w = t, s.h = e) }, 30) } var u = t.length; t.push(s), e.on("click", function(e) { e.preventDefault(); var a = $(".pswp")[0]; new PhotoSwipe(a, PhotoSwipeUI_Default, t, { index: u, bgOpacity: .8, showHideOpacity: !0, shareButtons: [{ id: "twitter", label: "Tweet", url: "https://twitter.com/intent/tweet?text={{text}}&url={{url}}" }, { id: "download", label: "Download image", url: "{{raw_image_url}}", download: !0 }] }).init() }) }) });
